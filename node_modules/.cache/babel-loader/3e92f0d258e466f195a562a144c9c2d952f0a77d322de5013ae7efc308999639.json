{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./SUSignInForm.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SUSignInForm(){const navigate=useNavigate();const[showForgotPassword,setShowForgotPassword]=useState(false);const[showVerificationPopup,setShowVerificationPopup]=useState(false);const[showResetPasswordPopup,setShowResetPasswordPopup]=useState(false);const handleSubmit=async event=>{event.preventDefault();const superuseridNumber=event.target.superuseridNumber.value;const superuserpassword=event.target.superuserpassword.value;try{const response=await fetch('http://localhost:8080/superuser/signin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({superUserIdNumber:superuseridNumber,// Correct case for backend\nsuperUserPassword:superuserpassword// Correct case for backend\n})});console.log('Response:',response);// Debugging: check the raw response\nif(response.ok){const data=await response.json();console.log('Data:',data);// Debugging: check the parsed data\n// Store the correct user data in local storage\nlocalStorage.setItem('superuserToken',data.token);localStorage.setItem('loggedInSuperUser',JSON.stringify({superuserId:data.superuserId,// Consistent lowercase 'superuserId'\nsuperusername:data.superusername,fullName:data.fullName,email:data.email,superuseridNumber:data.superUserIdNumber,// Correct key reference\nprofilePicture:data.profilePicture||null// Added null fallback in case profilePicture is missing\n}));// Navigate to the super user home page after login\nnavigate(\"/SUhome\");}else{const message=await response.text();console.log('Login failed:',message);// Debugging: log the failure message\nalert(\"Login failed: \".concat(message));}}catch(error){console.error('Error during login:',error);// Debugging: log any errors\nalert('An error occurred. Please try again.');}};const handleForgotPasswordClick=()=>{setShowForgotPassword(true);};const handleCloseForgotPassword=()=>{setShowForgotPassword(false);};const handleSendCodeClick=()=>{setShowForgotPassword(false);setShowVerificationPopup(true);};const handleCloseVerificationPopup=()=>{setShowVerificationPopup(false);};const handleVerifyClick=()=>{setShowVerificationPopup(false);setShowResetPasswordPopup(true);};const handleCloseResetPasswordPopup=()=>{setShowResetPasswordPopup(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"SUsignin-form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"ID Number \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"superuseridNumber\",required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"superuserpassword\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleForgotPasswordClick,className:\"forgot-password\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"SIGN IN\"})]}),showForgotPassword&&/*#__PURE__*/_jsx(\"div\",{className:\"forgot-password-popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:handleCloseForgotPassword,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Forgot Password\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Enter email address\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendCodeClick,children:\"Send Code\"})]})}),showVerificationPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"verification-popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:handleCloseVerificationPopup,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Enter Verification Code\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Verification Code\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"verificationCode\",required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"small-button\",children:\"Resend Code\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleVerifyClick,children:\"Verify\"})]})}),showResetPasswordPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"reset-password-popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:handleCloseResetPasswordPopup,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Enter New Password\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"New Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"newPassword\",required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Confirm Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseResetPasswordPopup,children:\"Reset Password\"})]})})]});}","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SUSignInForm","navigate","showForgotPassword","setShowForgotPassword","showVerificationPopup","setShowVerificationPopup","showResetPasswordPopup","setShowResetPasswordPopup","handleSubmit","event","preventDefault","superuseridNumber","target","value","superuserpassword","response","fetch","method","headers","body","JSON","stringify","superUserIdNumber","superUserPassword","console","log","ok","data","json","localStorage","setItem","token","superuserId","superusername","fullName","email","profilePicture","message","text","alert","concat","error","handleForgotPasswordClick","handleCloseForgotPassword","handleSendCodeClick","handleCloseVerificationPopup","handleVerifyClick","handleCloseResetPasswordPopup","children","onSubmit","className","type","name","required","onClick"],"sources":["/Users/richardmolina/Documents/GitHub/ADMIN_TECHHIVE_FRONTEND/src/SuperUser pages/SUSignIn/SUSignInForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./SUSignInForm.css\";\n\nexport default function SUSignInForm() {\n    const navigate = useNavigate();\n    const [showForgotPassword, setShowForgotPassword] = useState(false);\n    const [showVerificationPopup, setShowVerificationPopup] = useState(false);\n    const [showResetPasswordPopup, setShowResetPasswordPopup] = useState(false);\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        const superuseridNumber = event.target.superuseridNumber.value;\n        const superuserpassword = event.target.superuserpassword.value;\n\n        try {\n            const response = await fetch('http://localhost:8080/superuser/signin', { \n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    superUserIdNumber: superuseridNumber, // Correct case for backend\n                    superUserPassword: superuserpassword, // Correct case for backend\n                }),\n            });\n\n            console.log('Response:', response); // Debugging: check the raw response\n\n            if (response.ok) {\n                const data = await response.json();\n                console.log('Data:', data); // Debugging: check the parsed data\n\n                // Store the correct user data in local storage\n                localStorage.setItem('superuserToken', data.token);\n                localStorage.setItem('loggedInSuperUser', JSON.stringify({\n                    superuserId: data.superuserId, // Consistent lowercase 'superuserId'\n                    superusername: data.superusername,\n                    fullName: data.fullName,\n                    email: data.email,\n                    superuseridNumber: data.superUserIdNumber, // Correct key reference\n                    profilePicture: data.profilePicture || null, // Added null fallback in case profilePicture is missing\n                }));\n\n                // Navigate to the super user home page after login\n                navigate(\"/SUhome\");\n            } else {\n                const message = await response.text();\n                console.log('Login failed:', message); // Debugging: log the failure message\n                alert(`Login failed: ${message}`);\n            }\n        } catch (error) {\n            console.error('Error during login:', error); // Debugging: log any errors\n            alert('An error occurred. Please try again.');\n        }\n    };\n\n    const handleForgotPasswordClick = () => {\n        setShowForgotPassword(true);\n    };\n\n    const handleCloseForgotPassword = () => {\n        setShowForgotPassword(false);\n    };\n\n    const handleSendCodeClick = () => {\n        setShowForgotPassword(false);\n        setShowVerificationPopup(true);\n    };\n\n    const handleCloseVerificationPopup = () => {\n        setShowVerificationPopup(false);\n    };\n\n    const handleVerifyClick = () => {\n        setShowVerificationPopup(false);\n        setShowResetPasswordPopup(true);\n    };\n\n    const handleCloseResetPasswordPopup = () => {\n        setShowResetPasswordPopup(false);\n    };\n\n    return (\n        <>\n            <form onSubmit={handleSubmit} className=\"SUsignin-form\">\n                <label>\n                    ID Number <br />\n                    <input type=\"text\" name=\"superuseridNumber\" required />\n                </label>\n                <br />\n                <label>\n                    Password <br />\n                    <input type=\"password\" name=\"superuserpassword\" required />\n                </label>\n                <button type=\"button\" onClick={handleForgotPasswordClick} className=\"forgot-password\">\n                    Forgot Password?\n                </button>\n                <br />\n                <button type=\"submit\">SIGN IN</button>\n            </form>\n\n            {showForgotPassword && (\n                <div className=\"forgot-password-popup\">\n                    <div className=\"popup-content\">\n                        <button className=\"close-button\" onClick={handleCloseForgotPassword}>\n                            &times;\n                        </button>\n                        <h2>Forgot Password</h2>\n                        <label>\n                            Enter email address\n                            <input type=\"email\" name=\"email\" required />\n                        </label>\n                        <br />\n                        <button onClick={handleSendCodeClick}>Send Code</button>\n                    </div>\n                </div>\n            )}\n\n            {showVerificationPopup && (\n                <div className=\"verification-popup\">\n                    <div className=\"popup-content\">\n                        <button className=\"close-button\" onClick={handleCloseVerificationPopup}>\n                            &times;\n                        </button>\n                        <h2>Enter Verification Code</h2>\n                        <label>\n                            Verification Code\n                            <input type=\"text\" name=\"verificationCode\" required />\n                        </label>\n                        <br />\n                        <button className=\"small-button\">Resend Code</button>\n                        <br />\n                        <button onClick={handleVerifyClick}>Verify</button>\n                    </div>\n                </div>\n            )}\n\n            {showResetPasswordPopup && (\n                <div className=\"reset-password-popup\">\n                    <div className=\"popup-content\">\n                        <button className=\"close-button\" onClick={handleCloseResetPasswordPopup}>\n                            &times;\n                        </button>\n                        <h2>Enter New Password</h2>\n                        <label>\n                            New Password\n                            <input type=\"password\" name=\"newPassword\" required />\n                        </label>\n                        <br />\n                        <h2>Confirm Password</h2>\n                        <label>\n                            Confirm Password\n                            <input type=\"password\" name=\"confirmPassword\" required />\n                        </label>\n                        <br />\n                        <button onClick={handleCloseResetPasswordPopup}>Reset Password</button>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE5B,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAG,CACnC,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACS,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACY,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAACc,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAE3E,KAAM,CAAAgB,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CAClCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,KAAM,CAAAC,iBAAiB,CAAGF,KAAK,CAACG,MAAM,CAACD,iBAAiB,CAACE,KAAK,CAC9D,KAAM,CAAAC,iBAAiB,CAAGL,KAAK,CAACG,MAAM,CAACE,iBAAiB,CAACD,KAAK,CAE9D,GAAI,CACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wCAAwC,CAAE,CACnEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,iBAAiB,CAAEX,iBAAiB,CAAE;AACtCY,iBAAiB,CAAET,iBAAmB;AAC1C,CAAC,CACL,CAAC,CAAC,CAEFU,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEV,QAAQ,CAAC,CAAE;AAEpC,GAAIA,QAAQ,CAACW,EAAE,CAAE,CACb,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CAClCJ,OAAO,CAACC,GAAG,CAAC,OAAO,CAAEE,IAAI,CAAC,CAAE;AAE5B;AACAE,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAEH,IAAI,CAACI,KAAK,CAAC,CAClDF,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAEV,IAAI,CAACC,SAAS,CAAC,CACrDW,WAAW,CAAEL,IAAI,CAACK,WAAW,CAAE;AAC/BC,aAAa,CAAEN,IAAI,CAACM,aAAa,CACjCC,QAAQ,CAAEP,IAAI,CAACO,QAAQ,CACvBC,KAAK,CAAER,IAAI,CAACQ,KAAK,CACjBxB,iBAAiB,CAAEgB,IAAI,CAACL,iBAAiB,CAAE;AAC3Cc,cAAc,CAAET,IAAI,CAACS,cAAc,EAAI,IAAM;AACjD,CAAC,CAAC,CAAC,CAEH;AACAnC,QAAQ,CAAC,SAAS,CAAC,CACvB,CAAC,IAAM,CACH,KAAM,CAAAoC,OAAO,CAAG,KAAM,CAAAtB,QAAQ,CAACuB,IAAI,CAAC,CAAC,CACrCd,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEY,OAAO,CAAC,CAAE;AACvCE,KAAK,kBAAAC,MAAA,CAAkBH,OAAO,CAAE,CAAC,CACrC,CACJ,CAAE,MAAOI,KAAK,CAAE,CACZjB,OAAO,CAACiB,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAAE;AAC7CF,KAAK,CAAC,sCAAsC,CAAC,CACjD,CACJ,CAAC,CAED,KAAM,CAAAG,yBAAyB,CAAGA,CAAA,GAAM,CACpCvC,qBAAqB,CAAC,IAAI,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAwC,yBAAyB,CAAGA,CAAA,GAAM,CACpCxC,qBAAqB,CAAC,KAAK,CAAC,CAChC,CAAC,CAED,KAAM,CAAAyC,mBAAmB,CAAGA,CAAA,GAAM,CAC9BzC,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,wBAAwB,CAAC,IAAI,CAAC,CAClC,CAAC,CAED,KAAM,CAAAwC,4BAA4B,CAAGA,CAAA,GAAM,CACvCxC,wBAAwB,CAAC,KAAK,CAAC,CACnC,CAAC,CAED,KAAM,CAAAyC,iBAAiB,CAAGA,CAAA,GAAM,CAC5BzC,wBAAwB,CAAC,KAAK,CAAC,CAC/BE,yBAAyB,CAAC,IAAI,CAAC,CACnC,CAAC,CAED,KAAM,CAAAwC,6BAA6B,CAAGA,CAAA,GAAM,CACxCxC,yBAAyB,CAAC,KAAK,CAAC,CACpC,CAAC,CAED,mBACIV,KAAA,CAAAE,SAAA,EAAAiD,QAAA,eACInD,KAAA,SAAMoD,QAAQ,CAAEzC,YAAa,CAAC0C,SAAS,CAAC,eAAe,CAAAF,QAAA,eACnDnD,KAAA,UAAAmD,QAAA,EAAO,YACO,cAAArD,IAAA,QAAK,CAAC,cAChBA,IAAA,UAAOwD,IAAI,CAAC,MAAM,CAACC,IAAI,CAAC,mBAAmB,CAACC,QAAQ,MAAE,CAAC,EACpD,CAAC,cACR1D,IAAA,QAAK,CAAC,cACNE,KAAA,UAAAmD,QAAA,EAAO,WACM,cAAArD,IAAA,QAAK,CAAC,cACfA,IAAA,UAAOwD,IAAI,CAAC,UAAU,CAACC,IAAI,CAAC,mBAAmB,CAACC,QAAQ,MAAE,CAAC,EACxD,CAAC,cACR1D,IAAA,WAAQwD,IAAI,CAAC,QAAQ,CAACG,OAAO,CAAEZ,yBAA0B,CAACQ,SAAS,CAAC,iBAAiB,CAAAF,QAAA,CAAC,kBAEtF,CAAQ,CAAC,cACTrD,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQwD,IAAI,CAAC,QAAQ,CAAAH,QAAA,CAAC,SAAO,CAAQ,CAAC,EACpC,CAAC,CAEN9C,kBAAkB,eACfP,IAAA,QAAKuD,SAAS,CAAC,uBAAuB,CAAAF,QAAA,cAClCnD,KAAA,QAAKqD,SAAS,CAAC,eAAe,CAAAF,QAAA,eAC1BrD,IAAA,WAAQuD,SAAS,CAAC,cAAc,CAACI,OAAO,CAAEX,yBAA0B,CAAAK,QAAA,CAAC,MAErE,CAAQ,CAAC,cACTrD,IAAA,OAAAqD,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBnD,KAAA,UAAAmD,QAAA,EAAO,qBAEH,cAAArD,IAAA,UAAOwD,IAAI,CAAC,OAAO,CAACC,IAAI,CAAC,OAAO,CAACC,QAAQ,MAAE,CAAC,EACzC,CAAC,cACR1D,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ2D,OAAO,CAAEV,mBAAoB,CAAAI,QAAA,CAAC,WAAS,CAAQ,CAAC,EACvD,CAAC,CACL,CACR,CAEA5C,qBAAqB,eAClBT,IAAA,QAAKuD,SAAS,CAAC,oBAAoB,CAAAF,QAAA,cAC/BnD,KAAA,QAAKqD,SAAS,CAAC,eAAe,CAAAF,QAAA,eAC1BrD,IAAA,WAAQuD,SAAS,CAAC,cAAc,CAACI,OAAO,CAAET,4BAA6B,CAAAG,QAAA,CAAC,MAExE,CAAQ,CAAC,cACTrD,IAAA,OAAAqD,QAAA,CAAI,yBAAuB,CAAI,CAAC,cAChCnD,KAAA,UAAAmD,QAAA,EAAO,mBAEH,cAAArD,IAAA,UAAOwD,IAAI,CAAC,MAAM,CAACC,IAAI,CAAC,kBAAkB,CAACC,QAAQ,MAAE,CAAC,EACnD,CAAC,cACR1D,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQuD,SAAS,CAAC,cAAc,CAAAF,QAAA,CAAC,aAAW,CAAQ,CAAC,cACrDrD,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ2D,OAAO,CAAER,iBAAkB,CAAAE,QAAA,CAAC,QAAM,CAAQ,CAAC,EAClD,CAAC,CACL,CACR,CAEA1C,sBAAsB,eACnBX,IAAA,QAAKuD,SAAS,CAAC,sBAAsB,CAAAF,QAAA,cACjCnD,KAAA,QAAKqD,SAAS,CAAC,eAAe,CAAAF,QAAA,eAC1BrD,IAAA,WAAQuD,SAAS,CAAC,cAAc,CAACI,OAAO,CAAEP,6BAA8B,CAAAC,QAAA,CAAC,MAEzE,CAAQ,CAAC,cACTrD,IAAA,OAAAqD,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BnD,KAAA,UAAAmD,QAAA,EAAO,cAEH,cAAArD,IAAA,UAAOwD,IAAI,CAAC,UAAU,CAACC,IAAI,CAAC,aAAa,CAACC,QAAQ,MAAE,CAAC,EAClD,CAAC,cACR1D,IAAA,QAAK,CAAC,cACNA,IAAA,OAAAqD,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBnD,KAAA,UAAAmD,QAAA,EAAO,kBAEH,cAAArD,IAAA,UAAOwD,IAAI,CAAC,UAAU,CAACC,IAAI,CAAC,iBAAiB,CAACC,QAAQ,MAAE,CAAC,EACtD,CAAC,cACR1D,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ2D,OAAO,CAAEP,6BAA8B,CAAAC,QAAA,CAAC,gBAAc,CAAQ,CAAC,EACtE,CAAC,CACL,CACR,EACH,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}